<!doctype html>
<html>
<head>
<meta charset=utf-8 />
<title>Super Mario HTML5 Test</title>
<link href="Content/style.css" rel="stylesheet" />
<style>
  .splash { position: fixed; inset: 0; display: grid; place-items: center; background: rgba(0,0,0,0.65); backdrop-filter: blur(2px); z-index: 2000; }
  .splash-card { background: #111; color: #fff; padding: 24px 28px; border-radius: 12px; text-align: center; border: 1px solid rgba(255,255,255,0.15); min-width: 280px; }
  .splash-card h2 { margin: 0 0 6px 0; font-weight: 700; letter-spacing: .5px; }
  .splash-card h3 { margin: 0 0 16px 0; font-weight: 500; opacity: .9; }
  .start-btn { background: #10b981; color: #06120f; border: none; padding: 10px 16px; border-radius: 8px; cursor: pointer; font-weight: 600; }
  .start-btn:hover { filter: brightness(1.05); }
  .note { opacity: .8; font-size: 12px; margin-top: 10px; }
  .hidden { display: none !important; }
  .rawlins-title { position: fixed; top: 10px; left: 50%; transform: translateX(-50%); z-index: 2100; padding: 6px 14px; border-radius: 12px; background: rgba(0,0,0,0.35); backdrop-filter: blur(6px); border: 1px solid rgba(255,255,255,0.14); color: #fff; font-weight: 800; letter-spacing: 0.42em; font-size: 22px; line-height: 1; text-transform: uppercase; text-shadow: 0 8px 22px rgba(0,0,0,0.45); user-select: none; }
  .idiot-prompt { position: fixed; inset: 0; display: grid; place-items: center; z-index: 2200; pointer-events: none; }
  .idiot-prompt-inner { padding: 18px 22px; border-radius: 16px; background: rgba(15,23,42,0.92); border: 1px solid rgba(248,113,113,0.8); color: #fecaca; font-size: 24px; font-weight: 800; text-align: center; max-width: 520px; box-shadow: 0 18px 45px rgba(0,0,0,0.75); text-transform: uppercase; letter-spacing: .05em; }
  .idiot-prompt-inner span { display: block; margin-top: 8px; font-size: 16px; font-weight: 600; color: #fed7aa; }
  .idiot-mode-label { position: fixed; bottom: 16px; left: 50%; transform: translateX(-50%); z-index: 2150; padding: 6px 14px; border-radius: 999px; background: rgba(248,113,113,0.9); color: #111827; font-weight: 800; letter-spacing: .08em; font-size: 13px; text-transform: uppercase; box-shadow: 0 12px 32px rgba(0,0,0,0.6); display: none; }
  .kick-chat { position: fixed; top: 56px; right: 12px; width: 360px; height: 360px; z-index: 2100; border-radius: 12px; overflow: hidden; border: 1px solid rgba(255,255,255,0.14); background: rgba(0,0,0,0.35); backdrop-filter: blur(6px); }
  .kick-chat iframe { width: 360px; height: 720px; border: 0; display: block; transform: translateY(-110px); }
  .kick-chat .kick-toggle { position: absolute; top: 8px; left: 8px; z-index: 2; background: rgba(0,0,0,0.75); color: #fff; border: 1px solid rgba(255,255,255,0.18); padding: 6px 8px; border-radius: 8px; cursor: pointer; font-size: 12px; line-height: 1; }
  .kick-chat.kick-messages { width: 360px; height: 260px; }
  .kick-chat.kick-messages iframe { height: 720px; transform: translateY(-150px); }
  .kick-chat.kick-messages::before { content: ''; position: absolute; left: 0; right: 0; top: 0; height: 34px; background: rgba(0,0,0,0.85); pointer-events: none; }
  .kick-chat.kick-messages::after { content: ''; position: absolute; left: 0; right: 0; bottom: 0; height: 64px; background: rgba(0,0,0,0.85); pointer-events: none; }
  .controls-hint { position: fixed; left: 50%; top: 14%; transform: translateX(-50%); z-index: 2050; padding: 10px 18px; border-radius: 999px; background: rgba(0,0,0,0.55); backdrop-filter: blur(4px); color: #f9fafb; font-size: 14px; font-weight: 700; letter-spacing: .06em; text-transform: uppercase; pointer-events: none; opacity: 0; transition: opacity .25s ease; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }
  .controls-hint.visible { opacity: 1; }
  .controls-overlay { position: fixed; inset: 0; display: grid; place-items: center; z-index: 2000; pointer-events: none; background: rgba(0,0,0,0.45); backdrop-filter: blur(4px); opacity: 0; transition: opacity .25s ease; }
  .controls-overlay.visible { opacity: 1; }
  .hanife-modal { position: fixed; inset: 0; display: grid; place-items: center; z-index: 2300; background: rgba(0,0,0,0.65); backdrop-filter: blur(5px); }
  .hanife-modal-inner { background: #020617; border-radius: 16px; padding: 18px 20px 16px; border: 1px solid rgba(148,163,184,0.6); width: 320px; max-width: 90vw; box-shadow: 0 20px 50px rgba(0,0,0,0.8); text-align: center; color: #e5e7eb; font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
  .hanife-avatar { width: 80px; height: 80px; border-radius: 999px; object-fit: cover; border: 2px solid #22c55e; box-shadow: 0 0 12px rgba(34,197,94,0.7); margin-bottom: 10px; }
  .hanife-title { font-size: 18px; font-weight: 700; margin-bottom: 12px; letter-spacing: .03em; }
  .hanife-sub { font-size: 13px; opacity: .8; margin-bottom: 14px; }
  .hanife-actions { display: flex; gap: 8px; justify-content: center; }
  .hanife-actions button { flex: 1; padding: 8px 10px; border-radius: 999px; border: none; cursor: pointer; font-weight: 600; font-size: 13px; }
  #hanife-accept { background: #22c55e; color: #052e16; }
  #hanife-decline { background: #0f172a; color: #e5e7eb; border: 1px solid rgba(148,163,184,0.7); }
  .hanife-banner { position: fixed; left: 16px; top: 64px; z-index: 2400; display: flex; align-items: center; gap: 8px; padding: 8px 12px; border-radius: 999px; background: rgba(15,23,42,0.9); border: 1px solid rgba(148,163,184,0.7); color: #e5e7eb; font-size: 13px; font-weight: 600; box-shadow: 0 10px 30px rgba(0,0,0,0.8); opacity: 0; pointer-events: none; transform: translateX(-12px); transition: opacity .25s ease, transform .25s ease; }
  .hanife-banner.visible { opacity: 1; transform: translateX(0); }
  .hanife-banner img { width: 28px; height: 28px; border-radius: 999px; object-fit: cover; border: 1px solid #22c55e; }
  .hanife-banner span { font-size: 12px; letter-spacing: .03em; text-transform: uppercase; }
</style>
</head>
<body>
<div class="rawlins-title">R A W L I N S</div>
<div id="idiot-prompt" class="idiot-prompt hidden">
  <div class="idiot-prompt-inner">
    Çpk fazla öldün Gerizekalı
    <span>Gameplay Modunu Ekinleştirmek için ESC basın</span>
  </div>
</div>
<div id="idiot-fail" class="idiot-prompt hidden">
  <div class="idiot-prompt-inner">
    La mal gerizekalı modunda bile yapamadın
  </div>
</div>
<div id="idiot-mode-label" class="idiot-mode-label">3x daha yükseğe zıplayabilirsin - mallara özel</div>
<div class="kick-chat kick-messages" id="kick-chat">
  <button type="button" class="kick-toggle" id="kick-toggle">Tam</button>
  <iframe src="https://kick.com/popout/oguzsasi/chat" referrerpolicy="no-referrer" allow="clipboard-read; clipboard-write"></iframe>
</div>
<div id="game">
<div id="world">
</div>
<div id="coinNumber" class="gauge">0</div>
<div id="coin" class="gaugeSprite"></div>
<div id="liveNumber" class="gauge">0</div>
<div id="live" class="gaugeSprite"></div>
</div>
<div id="splash" class="splash">
  <div class="splash-card">
    <h2>Rawlins Sunar</h2>
    <h3>Oyunu Başlar</h3>
    <button id="start-btn" class="start-btn">Başlat</button>
    <p class="note">Başlata bassana şaban</p>
  </div>
</div>
<div id="controls-hint" class="controls-hint">
  Yürü: A / D &nbsp;•&nbsp; Eğil: S &nbsp;•&nbsp; Zıpla: SPACE
</div>
<div id="hanife-modal" class="hanife-modal hidden">
  <div class="hanife-modal-inner">
    <img class="hanife-avatar" src="https://www.dropbox.com/scl/fi/2hlaludz1pux7qqkvyns6/enfJF8nsZ0k66LUXmG35o8sjHU2VGbDl9X0VyP_9WsI.avif?rlkey=ylln2bkrszjbobldu77bpxteo&st=s10w4brg&dl=1" alt="Hanife Teyze" />
    <div class="hanife-title">Hanife Teyze Arıyor.....</div>
    <div class="hanife-sub">Ne yapıyorsun orada bakayım?</div>
    <div class="hanife-actions">
      <button id="hanife-accept">Aç</button>
      <button id="hanife-decline">Açma</button>
    </div>
  </div>
</div>
<div id="hanife-banner" class="hanife-banner">
  <img src="https://www.dropbox.com/scl/fi/2hlaludz1pux7qqkvyns6/enfJF8nsZ0k66LUXmG35o8sjHU2VGbDl9X0VyP_9WsI.avif?rlkey=ylln2bkrszjbobldu77bpxteo&st=s10w4brg&dl=1" alt="Hanife Teyze" />
  <span>Hanife teyze hatta</span>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="Scripts/testlevels.js"></script>
<script src="Scripts/oop.js"></script>
<script src="Scripts/keys.js"></script>
<script src="Scripts/constants.js"></script>
<script>
  (function(){
    if (!window.jQuery) return;
    var queue = [];
    var orig = jQuery.fn.ready;
    jQuery.fn.ready = function(fn){ queue.push(fn); return this; };
    window.__runDeferredReady = function(){
      var fn; while((fn = queue.shift())) { try { fn.call(document); } catch(e){} }
      jQuery.fn.ready = orig;
    };
  })();
  </script>
<script src="Scripts/sound.js"></script>
<script src="Scripts/main.js"></script>
<script>
  (function(){
    function wireLevelSound(){
      if (!window.Level) return false;
      Level.prototype.setSounds = function(){};
      Level.prototype.playSound = function(label){ if (window.__soundMgr) window.__soundMgr.play(label); };
      Level.prototype.playMusic = function(label){ if (window.__soundMgr) window.__soundMgr.sideMusic(label); };
      return true;
    }
    wireLevelSound();

    var kickWrap = document.getElementById('kick-chat');
    var kickToggle = document.getElementById('kick-toggle');
    if (kickWrap && kickToggle) {
      kickToggle.addEventListener('click', function(){
        var enabled = kickWrap.classList.toggle('kick-messages');
        kickToggle.textContent = enabled ? 'Tam' : 'Mesajlar';
      });
    }

    var btn = document.getElementById('start-btn');
    var splash = document.getElementById('splash');
    var controlsHint = document.getElementById('controls-hint');
    var hanifeModal = document.getElementById('hanife-modal');
    var hanifeAccept = document.getElementById('hanife-accept');
    var hanifeDecline = document.getElementById('hanife-decline');
    var hanifeBanner = document.getElementById('hanife-banner');
    if (btn) {
      btn.addEventListener('click', function(){
        if (splash) splash.classList.add('hidden');
        if (controlsHint) {
          controlsHint.classList.add('visible');
          setTimeout(function(){ controlsHint.classList.remove('visible'); }, 4000);
        }
        if (window.SoundManager) {
          window.__soundMgr = new SoundManager({
            sfx: {
              jump: 'https://assets.mixkit.co/active_storage/sfx/388/388-preview.mp3',
              bump: 'https://assets.mixkit.co/active_storage/sfx/1701/1701-preview.mp3',
              coin: 'https://assets.mixkit.co/active_storage/sfx/2567/2567-preview.mp3',
              mushroom: 'https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3',
              grow: 'https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3',
              shoot: 'https://assets.mixkit.co/active_storage/sfx/2683/2683-preview.mp3',
              liveupgrade: 'https://assets.mixkit.co/active_storage/sfx/2570/2570-preview.mp3',
              hurt: 'https://assets.mixkit.co/active_storage/sfx/920/920-preview.mp3',
              enemy_die: 'https://www.dropbox.com/scl/fi/znwwcmrwgpcu7rbxiqt3m/smb_kick.wav?rlkey=x6lyg6git96e7f52xogxxb5w3&st=fbji9hw1&dl=1',
              shell: 'https://www.dropbox.com/scl/fi/znwwcmrwgpcu7rbxiqt3m/smb_kick.wav?rlkey=x6lyg6git96e7f52xogxxb5w3&st=fbji9hw1&dl=1',
              die: 'https://assets.mixkit.co/active_storage/sfx/920/920-preview.mp3'
            },
            bgm: 'https://www.dropbox.com/scl/fi/2evfraew8zzmz5u86rb0f/O-uz-Sasi-De-La-Pandikos-REMASTERED.mp3?rlkey=1jhdfp3ehkx1gyoeh77jlsj2s&st=gqrfkghk&dl=1',
            volume: 0.5,
            deathUrl: 'https://www.dropbox.com/scl/fi/nw2e167pl33r5vd3xtiq9/O-uz-Sasi-Ahlama-Earrape-mp3cut.net.mp3?rlkey=sq3n6ibu4qj8h0dm35pahrdiw&st=5sh0twb9&dl=1'
          });
          // start background music now
          window.__soundMgr.sideMusic('bgm');
        }
        if (window.__runDeferredReady) window.__runDeferredReady();

        if (!window.__hanifeTimerStarted) {
          window.__hanifeTimerStarted = true;
          setTimeout(function(){
            if (window.level && typeof window.level.pause === 'function') {
              window.level.pause();
            }
            if (hanifeModal) hanifeModal.classList.remove('hidden');
          }, 30000);
        }
      });
    }

    function resumeGame() {
      if (window.level && typeof window.level.start === 'function') {
        // only start loop again if not already running
        if (!window.level.loop) {
          window.level.start();
        }
      }
    }

    if (hanifeAccept) {
      hanifeAccept.addEventListener('click', function(){
        if (hanifeModal) hanifeModal.classList.add('hidden');
        try {
          var audio = new Audio('https://www.dropbox.com/scl/fi/6hmrjeqq1ebuqvtqewehq/hanife-teyze-mp3cut.net.mp3?rlkey=blp4zfij7d0oqspxe1mhq9wuf&st=lfqv0tpj&dl=1');
          var oldVol = null;
          if (window.__soundMgr && typeof window.__soundMgr.getVolume === 'function' && typeof window.__soundMgr.setVolume === 'function') {
            oldVol = window.__soundMgr.getVolume();
            window.__soundMgr.setVolume(oldVol * 0.1);
          }
          audio.volume = 1.0;
          if (hanifeBanner) {
            hanifeBanner.classList.add('visible');
            setTimeout(function(){ hanifeBanner.classList.remove('visible'); }, 5000);
          }
          audio.addEventListener('ended', function(){
            if (oldVol !== null && window.__soundMgr && typeof window.__soundMgr.setVolume === 'function') {
              window.__soundMgr.setVolume(oldVol);
            }
          });
          audio.play().catch(function(){});
        } catch(e) {}
        resumeGame();
      });
    }

    if (hanifeDecline) {
      hanifeDecline.addEventListener('click', function(){
        if (hanifeModal) hanifeModal.classList.add('hidden');
        resumeGame();
      });
    }
  })();
  </script>
</body>
</html>
